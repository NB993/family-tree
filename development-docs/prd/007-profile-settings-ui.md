# 프로필 설정 화면 UI PRD

> **Issue**: #64
> **유형**: 기본형 (FE UI + API 연동)
> **작성일**: 2026-01-26

## 개요

- **목적**: 사용자가 자신의 프로필 정보(이름, 생일)를 수정할 수 있는 설정 화면 제공
- **대상 사용자**: 로그인한 모든 사용자
- **관련 이슈**: #66 (회원 탈퇴 - 같은 화면에 배치)

## 선행 조건 (Dependencies)

| 항목 | 상태 | 설명 |
|------|------|------|
| BE 프로필 수정 API | ✅ 완료 | `PATCH /api/users/me` |
| BE 사용자 조회 API | ✅ 완료 | `FindUserResponse`에 `birthday`, `birthdayType` 필드 추가됨 |

## 유스케이스

### UC-1: 프로필 설정 화면 진입

- **전제조건**: 사용자가 로그인되어 있음
- **기본 흐름**:
  1. 사용자가 헤더 우측 상단의 설정(톱니바퀴) 아이콘을 클릭한다
  2. 드롭다운 메뉴가 하단으로 펼쳐진다
  3. 메뉴 항목: [프로필 설정] [로그아웃]
  4. 사용자가 "프로필 설정"을 클릭한다
  5. 시스템이 `/settings` 페이지로 이동한다
  6. 시스템이 현재 사용자 정보를 조회하여 폼에 표시한다

### UC-2: 프로필 정보 수정

- **전제조건**: UC-1 완료, 프로필 설정 화면 진입
- **기본 흐름**:
  1. 사용자가 이름 필드를 수정한다
  2. 사용자가 생일 필드를 수정한다 (선택)
  3. 사용자가 생일 유형(양력/음력)을 선택한다 (생일 입력 시)
  4. 사용자가 "저장" 버튼을 클릭한다
  5. 시스템이 `PATCH /api/users/me` API를 호출한다
  6. 시스템이 토스트 메시지로 "프로필이 수정되었습니다" 표시
  7. 사용자는 현재 페이지에 남아있음
- **예외 흐름**:
  - E1: 이름이 비어있음 → 클라이언트 validation 에러 표시
  - E2: API 호출 실패 → 에러 토스트 메시지 표시

### UC-3: 회원 탈퇴 (연계 - #66)

- **전제조건**: UC-1 완료
- **기본 흐름**:
  1. 사용자가 화면 하단 "위험 영역"의 "회원 탈퇴" 버튼을 클릭한다
  2. AlertDialog 확인 모달이 표시된다
  3. (이후 #66에서 상세 정의)

## UI 구조

### 헤더 설정 메뉴 (HomePage 수정)

```
┌──────────────────────────────────────┐
│ 오래오래        [userName ▼] [⚙️]   │  ← 톱니바퀴 아이콘
│ {userName}      ┌──────────────┐     │
│                 │ 프로필 설정   │     │  ← 드롭다운 메뉴
│                 │ 로그아웃     │     │
│                 └──────────────┘     │
└──────────────────────────────────────┘
```

### 프로필 설정 페이지 (`/settings`)

```
┌──────────────────────────────────────┐
│ ← 프로필 설정                        │  ← 헤더 (뒤로가기)
├──────────────────────────────────────┤
│                                      │
│  이름 *                              │
│  ┌────────────────────────────────┐  │
│  │ {현재 이름}                    │  │
│  └────────────────────────────────┘  │
│                                      │
│  생일                                │
│  ┌─────────────────┐ ┌────────────┐  │
│  │ {YYYY-MM-DD}    │ │ 양력 ▼    │  │
│  └─────────────────┘ └────────────┘  │
│                                      │
│  ┌────────────────────────────────┐  │
│  │            저장                │  │
│  └────────────────────────────────┘  │
│                                      │
│  ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─   │  ← 구분선 (margin-top: 48px)
│                                      │
│  ⚠️ 위험 영역                        │  ← 빨간색 텍스트
│  ┌────────────────────────────────┐  │
│  │ 계정을 삭제하면 모든 데이터가   │  │  ← 회색 배경
│  │ 영구적으로 삭제됩니다.         │  │
│  │                                │  │
│  │      [ 회원 탈퇴 ]             │  │  ← variant="destructive"
│  └────────────────────────────────┘  │
│                                      │
└──────────────────────────────────────┘
```

## 입출력 정의

### 입력 (ModifyUserRequest)

| 필드명 | 타입 | 필수 | 설명 | 제약조건 |
|-------|------|-----|------|---------|
| name | string | Y | 사용자 이름 | 1자 이상, 공백 불가 |
| birthday | string (ISO 8601) | N | 생년월일 | YYYY-MM-DDTHH:mm:ss |
| birthdayType | 'SOLAR' \| 'LUNAR' | N* | 생일 유형 | *birthday 입력 시 필수 |

### 출력 (FindUserResponse)

| 필드명 | 타입 | 설명 |
|-------|------|------|
| id | number | 사용자 ID |
| email | string | 이메일 |
| name | string | 이름 |
| profileUrl | string | 프로필 이미지 URL |
| birthday | string | 생년월일 |
| birthdayType | 'SOLAR' \| 'LUNAR' | 생일 유형 |
| createdAt | string | 생성일시 |
| modifiedAt | string | 수정일시 |

## 구현 파일 목록

### 신규 생성

| 파일 | 설명 |
|------|------|
| `fe/src/pages/SettingsPage.tsx` | 프로필 설정 페이지 |
| `fe/src/hooks/queries/useUserQueries.ts` | 사용자 관련 React Query 훅 |

### 수정

| 파일 | 설명 |
|------|------|
| `fe/src/App.tsx` | `/settings` 라우트 추가 |
| `fe/src/pages/HomePage.tsx` | 헤더에 설정 드롭다운 메뉴 추가 |
| `fe/src/api/services/user.ts` | `modifyUser()` 메서드 추가 |
| `fe/src/types/user.ts` | `ModifyUserRequest` 타입 추가 |

## 예외 케이스

| 코드 | 상황 | 메시지 |
|-----|------|--------|
| CLIENT_VALIDATION | 이름 비어있음 | "이름을 입력해주세요" |
| CLIENT_VALIDATION | 생일만 입력, 유형 미선택 | "생일 유형을 선택해주세요" |
| 400 | 서버 validation 실패 | API 응답 메시지 표시 |
| 401 | 인증 만료 | 로그인 페이지로 리다이렉트 |
| 500 | 서버 오류 | "잠시 후 다시 시도해주세요" |

## 접근성 요구사항 (WCAG 2.1 AA)

| 항목 | 요구사항 |
|------|---------|
| 폼 레이블 | 모든 입력 필드에 `<label>` 연결 (1.3.1) |
| 에러 식별 | 에러 발생 시 해당 필드에 시각적 표시 + 텍스트 설명 (3.3.1) |
| 키보드 접근 | Tab으로 모든 요소 접근 가능 (2.1.1) |
| 색상 대비 | 텍스트 최소 4.5:1 대비 (1.4.3) |
| 포커스 표시 | 포커스된 요소 시각적 구분 (2.4.7) |

## 참고

- 디자인 패턴: `fe/src/components/family/MemberEditModal.tsx` 참조
- 컴포넌트: shadcn/ui Dialog, Input, Label, Select, Button 사용
