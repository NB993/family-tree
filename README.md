# Family Tree - AI 협업 실험 프로젝트

## 프로젝트 개요

이 프로젝트는 **AI와 어디까지 협력할 수 있을지 알아보는 실험적인 프로젝트**입니다. 실제 가족트리 관리 서비스를 개발하면서 사람과 AI가 어떤 방식으로 협업할 수 있는지, 그 한계와 가능성을 탐구하고 있습니다.

## AI 협업을 위한 아키텍처 설계

#### 헥사고날 선택 이유 - AI 협업 최적화를 위한 전략적 설계

이 프로젝트에서 헥사고날 아키텍처(포트&어댑터 패턴)를 선택한 것은 복합적인 이유에 기반합니다. 우선 만능 아키텍처가 있다고 생각하지는 않으며, 아키텍처는 약속과 규칙의 집합일 뿐이고 상황에 따라 달라질 수 있다고 생각합니다. 헥사고날 아키텍처를 선택한 데에는 개인적인 학습 욕심이 상당 부분 작용했습니다.

다만, AI 협업이라는 특수한 상황에서 헥사고날 아키텍처가 가지는 몇 가지 이점들이 추가적인 선택 이유로 작용했습니다. 헥사고날 아키텍처는 일반적인 레이어드 아키텍처에 비해 의존성 역전이 좀 더 규칙화되어 있습니다. AI가 일반적인 개발 관례를 따를 때 "헥사고날 아키텍처"라는 명확한 키워드를 보면 포트와 어댑터 패턴, 의존성 역전, 코어의 외부 독립성 등을 자동으로 인식하고 적용할 가능성이 높습니다. 이는 AI와 개발자가 같은 아키텍처 철학을 공유하기 쉽게 만들어 줍니다.

헥사고날 아키텍처의 의존성 역전을 통해 코어 계층이 외부 기술을 전혀 알지 못하게 됩니다. 이는 AI가 도메인 로직 구현 시 데이터베이스 스키마나 외부 API 구조를 고려할 필요 없이 순수한 비즈니스 규칙에만 집중할 수 있게 합니다. 또한 각 계층이 명확한 포트 인터페이스로 소통하기 때문에, AI가 특정 계층 구현 시 다른 계층의 구체적인 구현 방식을 알 필요가 없어 작업 복잡도가 크게 줄어듭니다.

#### AI 비용 최적화를 위한 핵심 전략

AI는 결국 비용이며, 토큰량에 따라 비용이 발생합니다. 따라서 토큰 사용량을 최소화하면서도 최대한의 AI 활용 효과를 얻기 위해 작업 단위를 계층별로 세분화하여 AI에게 할당하고, 각 AI가 집중해야 할 맥락의 범위를 명확히 제한하는 전략을 채택했습니다.

#### Inside-Out 개발 방식의 채택

AI의 작업 순서를 **코어 계층 → 인프라 계층 → 프레젠테이션 계층** 순서로 설정한 것은 헥사고날 아키텍처의 의존성 역전을 최대한 활용하기 위함입니다. 코어 계층에서는 AI가 데이터베이스나 외부 시스템을 전혀 몰라도 "이런 데이터를 응답하고, 저장하면 된다"는 추상적 개념만으로 완전한 비즈니스 로직을 구현할 수 있습니다. 이 단계에서는 모킹을 통해 도메인 로직이 제대로 수행되는지만 검증하면 됩니다.

인프라 계층에서는 코어에서 정의된 포트 인터페이스를 실제 기술 스택으로 구현하며, 실제 외부와 통신하는 계층이므로 @DataJpaTest를 통해 실제 데이터로 테스트하도록 지시했습니다. 마지막으로 프레젠테이션 계층에서는 도메인 로직과 인프라 계층에 대한 검증이 모두 완료된 상태에서 전체 시스템이 잘 동작하는지 통합 검증을 수행합니다.

이러한 Inside-Out 방식은 AI가 각 단계에서 고려해야 할 복잡도를 점진적으로 증가시켜, 초기 단계에서는 순수한 비즈니스 로직에만 집중할 수 있게 하고, 후속 단계에서 기술적 구현 세부사항을 추가하는 구조입니다.

#### BE-FE 개발 순서 전략: 순차적 파이프라인

FE와 병렬 작업을 위해 Presentation 레이어를 먼저 개발하는 Outside-In 방식도 고려했으나, 현재 워크플로우를 유지하는 순차적 파이프라인 방식을 선택했습니다.

**선택한 방식**:
```
기능 A: BE 완료 (REST Docs 생성)
           ↓
기능 A: FE 시작  ←→  기능 B: BE 시작
           ↓              ↓
기능 A: FE 완료      기능 B: BE 완료 (REST Docs 생성)
```

**선택 이유**:
1. **인지 부하 감소**: 사람은 한 번에 하나의 맥락에만 집중 가능
2. **품질 유지**: BE가 완전히 검증된 상태(REST Docs 포함)에서 FE 작업 시작
3. **워크플로우 변경 불필요**: 기존 Inside-Out 순서 유지
4. **완전한 상태 전달**: 각 기능이 온전한 상태로 FE에 전달됨

#### 기존 접근 방식 대비 효율성 향상

실제 협업에서 의도했던 효과는 Claude AI의 특성에 맞춘 최적화였습니다. Claude는 대화 세션의 길이가 무제한이 아니므로, AI가 토큰을 덜 사용하여 한 대화 세션에서 작업할 수 있는 양이 적절하게 조절되도록 설계했습니다. 이를 통해 대화가 중간에 끊기는 참사를 줄이고 더 안정적인 협업이 가능하도록 하고자 했습니다. 또한 작업 단위가 명확히 분할되면서 사람이 AI 작업물을 검토해야 할 분량도 크게 줄어들어 검토 과정이 훨씬 수월해졌습니다. 무엇보다 한 기능을 구현하는 과정에서 어느 부분이 아직 진행되지 않았는지 파악하기가 매우 용이해져서, 전체적인 프로젝트 관리와 진행 상황 추적이 훨씬 체계적으로 이루어질 수 있게 되었습니다.

## AI 협업 워크플로우

### AI-사람 협업 구조

이 프로젝트에서 AI(Claude Code)와 사람은 다음과 같이 협업합니다:

| 역할 | AI | 사람 |
|------|-----|------|
| 기획 | PRD 초안 작성, 전문가 관점 검토 | 요구사항 제시, 최종 결정 |
| 개발 | TDD 기반 구현, 테스트 작성 | 코드 리뷰, 품질 검토 |
| 문서화 | REST Docs, 개발 문서 자동 생성 | 검토 및 승인 |

**핵심 원칙**:
- AI가 작업을 수행하고, 사람이 검토/승인
- 판단이 필요한 결정은 사람이 담당

### 업무 지시 및 관리 체계

#### Epic/Story 기반 티켓 관리 시스템 도입 배경

프로젝트가 점차 규모가 커져가면서 어느 순간부터 AI가 수행한 작업 내용을 파악하기 어려워지는 문제에 직면했습니다. 사람이 AI가 구현한 기획 내용과 실제 구현 결과를 점검하고 파악하는 시간이 필요한데, 이를 위해서는 AI와 나눴던 대화 내용, 기획된 내용, 정책 결정사항, 그리고 최종 구현 내용을 상세하게 기록한 문서가 필수적이었습니다.

하지만 단순히 문서화만 한다고 해서 문제가 해결되는 것은 아니었습니다. **문서를 추적할 수 있어야 하고, 특정 기능과 관련된 문서들을 매핑해서 찾아볼 수 있어야 진정한 의미가 있기 때문입니다.** 예를 들어, 특정 기능에 문제가 생겼을 때 그 기능의 기획 의도, 구현 과정, 변경 이력을 빠르게 추적할 수 있어야 효과적인 관리가 가능합니다.

이러한 문제를 해결하기 위해 **Jira와 같은 티켓 관리 시스템의 체계**를 도입하게 되었습니다. Epic과 Story 구조를 통해 큰 기능을 작은 단위로 분해하고, 각 작업에 고유한 티켓 번호(FT-001, FT-002 등)를 부여하여 관련된 모든 문서와 구현 내용을 하나의 식별자로 연결할 수 있게 했습니다. 이를 통해 AI에게 작업을 지시할 때도 명확한 채번 체계에 맞춰 문서를 작성하도록 지침을 만들어두었고, 나중에 특정 기능을 찾아보거나 문제를 해결할 때 관련된 모든 자료를 체계적으로 추적할 수 있게 되었습니다.

#### 작업 진행 프로세스
1. **요구사항 수집**: 사람이 기능 아이디어 제시
2. **PRD 작성**: `write-prd` → AI가 초안 작성, 사람이 검토
3. **테스트 케이스 도출**: `prd-to-test` → 테스트 시나리오 정의
4. **TDD 개발**: `core-tdd` → `infra-tdd` → `presentation-tdd`
5. **커밋**: `commit` → 커밋 메시지 작성
6. **품질 검토**: 사람이 결과물 검토 및 승인

## 프로젝트 구조

```
family-tree/
├── backend/                            # 백엔드 프로젝트 (Spring Boot + 헥사고날 아키텍처)
│   ├── src/
│   │   ├── main/java/io/jhchoe/familytree/
│   │   │   ├── core/                   # 도메인 계층
│   │   │   ├── infrastructure/         # 인프라 계층
│   │   │   └── presentation/           # 프레젠테이션 계층
│   │   └── test/                       # 테스트 코드
│   ├── docs/instructions/              # AI 개발 가이드라인
│   └── docs/planning/                  # 기획 문서
├── frontend/                           # 프론트엔드 프로젝트 (React + TypeScript)
├── docs/
│   ├── development/                    # 개발 완료 문서
│   │   ├── ft-001-*/                  # Epic/Story별 개발 문서
│   │   └── ft-002-*/
│   ├── architecture/                   # 아키텍처 문서
│   ├── collaboration/                  # AI 협업 가이드
│   └── progress/                       # 진행 상황 보고서
└── README.md                          # 이 파일
```

## 협력 프로세스 구축 여정

### 지속적으로 개선하고 있는 영역

#### 1. **워크플로우 체계화**
- **스킬 기반 워크플로우**: 명확한 스킬 순서를 통한 협업 관리
- **문서 기반 지시**: 명확한 가이드라인을 통한 일관성 확보
- **승인 프로세스**: 중요한 결정사항에 대한 사용자 승인 체계

#### 2. **개발 프로세스 표준화**
- **3단계 레이어드 개발**: 단계별 검증을 통한 안정성 확보
- **Epic/Story 구조**: Jira 스타일 티켓 관리로 진행 상황 추적
- **커밋 가이드라인**: 체계적인 변경 이력 관리

#### 3. **품질 관리 체계**
- **테스트 우선 개발**: 단위/통합/인수 테스트 필수 작성
- **문서화 의무**: Story 완료 시 개발 문서 필수 작성

#### 4. **AI 협업의 사용성 개선**
- **사람의 인지 부담 최소화**: 복잡해진 AI 지침 체계를 사람 대신 관리하는 AI 도입
- **자연어 기반 협업**: 개발 언어가 아닌 일반 언어로 소통하여 접근성 확대
- **비개발자 참여 실험**: 기획자나 디자이너도 AI와 직접 협업할 수 있는 환경 구축
- **작업 편의성 극대화**: AI 사용 목적인 '편리함'을 유지하면서도 체계적 관리 달성

#### 5. **안전장치 구축**
- **Git 안전 수칙**: 작업 손실 방지를 위한 엄격한 규칙
- **방어적 인수인계**: 세션 중단에 대비한 즉시 인수인계서 작성
- **단계별 승인**: 각 단계별 사용자 확인을 통한 리스크 관리


## 학습된 인사이트

### AI 협업의 장점
- **생각보다, 꽤나! 일관된 품질**: 가이드라인에 기반하여 표준화된 결과물을 제공
- **문서화 자동화**: 개발과 동시에 상세한 문서 생성
- **작업의 병렬화**: AI가 작업을 수행하는 동안 다른 작업 병행 가능 

### 발견된 제약사항 📌

#### 1. 세션 의존성️ (긴 대화에서의 맥락 유지 어려움)
AI를 작업 동료로서 활용 시 이 부분에 대한 해결이 시급하다고 생각합니다. AI의 대화 세션이 끊기는 경우 그 대화에서 나눴던 업무 맥락이 다음 대화에서 이어지지 않기 때문에 작업 흐름이 끊길 뿐 아니라 작업 결과물이 달라지는 결과를 낳습니다.

이에 대한 대비책으로 대화가 충분히 길어졌다고 판단하면 지금까지 같이 진행하던 작업 내용, AI가 이어서 해야 할 작업 내용을 담은 인수인계서를 작성하도록 체계를 갖추었습니다. 

AI가 작성한 인수인계서를 다음 대화에 넘겨주기만 하면 알아서 업무 현황을 파악하고 나서 바로 작업을 진행하기 때문에 사람의 AI 활용 피로도가 상당 부분 줄어드는 것을 경험했습니다.

그럼에도 간혹 대화 길이가 최대에 달해 인수인계서 작성 요청조차 불가능한 상황이 발생하곤 하여 이 문제는 다른 해결책을 찾아내려고 노력중입니다.
 
#### 2. 맥락 이해 한계 (복잡한 비즈니스 로직에 대한 깊은 이해 부족)

개발이 진행됨에 따라 관련 문서가 쌓이기 때문에 이를 읽으면 해결될 문제이지만 이는 곧 비용(토큰)입니다. 지침과 개발 문서가 많아지면서 AI가 작업을 시작하기 전에 관련 문서를 읽는 시간도 점점 길어지고 있고, 토큰 뿐만 아니라 읽는 시간 또한 비용입니다.

따라서 어느 범위까지 파악한 상태로 작업을 진행하게 할 것인지에 대한 기준을 세워야 하며, 거기에 맞춰 AI에게 어느 범위까지 작업을 맡길 수 있을지가 정해진다고 느꼈습니다.

#### 3. 사용자 승인 필요성 (중요한 결정에서는 사람의 최종 판단 필수)

작업을 하다보면 AI가 자기 마음대로 작업 결과물을 확정짓지 말았으면 하는 경우가 발생합니다. 그러한 예외 케이스를 대비하기 위해서 그런 유형의 작업은 아예 결정 권한을 주지 않는 편이 좋다고 느꼈습니다.

이러한 작업은 대부분 기준을 세우는 판단 영역의 작업이었고, 이런 작업은 AI에게 전권을 주기보다 사람이 신경써야만 하는 작업으로 분류하는 것이 좋다는 판단을 내렸습니다. 

현재로서는 완전한 자동화보다 고효율 협업 프로세스에 만족하자는 결론을 내렸습니다.

### 개선 방향
- **스킬 고도화**: 더 세분화된 작업 단위로 스킬 분리
- **더 강화된 품질 관리**: 단계별 검증 체계 고도화
- **사람-AI 협업 최적화**: 검토/승인 프로세스 효율화
- **비용 최적화 고도화**: 아키텍처 설계를 통한 토큰 효율성 극대화

## 관련 문서

- [AI 협업 가이드라인](./docs/collaboration/)
- [개발 문서](./docs/development/)
- [아키텍처 문서](./docs/architecture/)
- [진행 상황 보고서](./docs/progress/)

---

> **"AI와 함께 만들어가는 미래의 개발 방식을 실험하고 있습니다."**  
> 이 프로젝트를 통해 AI 협업의 가능성과 한계를 탐구하며, 실무에 적용 가능한 협업 모델을 지속적으로 발전시켜 나가고 있습니다.
